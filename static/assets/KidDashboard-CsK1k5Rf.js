import{r as o,j as e,b as O,u as Ne,c as we,d as Se,a as ke,e as Pe,f as le,g as Ae,h as Te,i as Me}from"./index-B7y1uFwl.js";import{t as Ee}from"./questThemeText-CfA0yiV6.js";import{S as pe}from"./star-Bf5rLmUo.js";import{m as v}from"./proxy-DKbc6vaK.js";import{F as ce}from"./flame-BoOmOgew.js";import{A as X}from"./index-BMI42rma.js";import{R as Ce,P as de}from"./PetLevelBadge-Dq0_iEHR.js";import{T as ze}from"./triangle-alert-DY7QHAWF.js";import{S as $e,H as _e,G as Ge,a as Ie}from"./sword-IpcIZ6qz.js";import{C as Re}from"./chevron-right-7thI_uZx.js";import{C as Be}from"./camera-Bq_laOck.js";import{H as me}from"./heart-SuKfgBYT.js";import"./shield-D0MMOIg_.js";function De({value:t=0,prefix:s="XP"}){const[a,l]=o.useState(t),n=o.useRef(t),d=o.useRef(null);return o.useEffect(()=>{const u=n.current,N=t;if(n.current=t,u===N){l(N);return}const $=N-u,_=Math.min(Math.abs($)*15,1500),G=performance.now();function i(L){const I=L-G,T=Math.min(I/_,1),p=1-Math.pow(1-T,3),R=Math.round(u+$*p);l(R),T<1&&(d.current=requestAnimationFrame(i))}return d.current=requestAnimationFrame(i),()=>{d.current&&cancelAnimationFrame(d.current)}},[t]),e.jsxs("div",{className:"inline-flex items-center gap-1.5",children:[e.jsx(pe,{size:16,className:"text-gold fill-gold"}),e.jsxs("span",{className:"font-heading text-gold text-sm font-bold tabular-nums",children:[a.toLocaleString()," ",s]})]})}const Oe={scale:[1,1.1,.97,1.05,1],rotate:[-1,2,-2,1,0],transition:{duration:1,repeat:1/0,repeatType:"mirror",ease:"easeInOut"}};function Le(t){return t>=30?{size:28,className:"text-orange-400 drop-shadow-[0_0_8px_rgba(251,146,60,0.5)]"}:t>=7?{size:22,className:"text-orange-400"}:{size:18,className:"text-orange-400/70"}}function Fe({streak:t=0,longest:s=0}){const[a,l]=o.useState(!1),n=Le(t),d=t>=30;return e.jsxs("div",{className:"relative inline-flex items-center gap-1",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[d?e.jsx(v.div,{animate:Oe,className:"flex items-center",children:e.jsx(ce,{size:n.size,className:n.className})}):e.jsx(ce,{size:n.size,className:n.className}),e.jsx("span",{className:"font-bold text-orange-400 text-sm tabular-nums",children:t}),a&&e.jsxs("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-1.5 bg-surface-raised border border-border rounded-lg text-center whitespace-nowrap z-10 shadow-lg",children:[e.jsxs("p",{className:"text-cream text-xs font-medium",children:[t," day streak"]}),e.jsxs("p",{className:"text-muted text-[10px]",children:["Best: ",s]}),e.jsx("div",{className:"absolute top-full right-3 w-0 h-0 border-l-[5px] border-l-transparent border-r-[5px] border-r-transparent border-t-[5px] border-t-border"})]})]})}const xe=["#3b82f6","#10b981","#f59e0b","#a855f7","#ef4444","#60a5fa"],qe=30,te=3;function U(t,s){return Math.random()*(s-t)+t}function Qe(){return Array.from({length:qe},(t,s)=>{const a=U(0,Math.PI*2),l=U(200,500),n=U(6,14),d=Math.random()>.5?"circle":"rect";return{id:s,color:xe[Math.floor(Math.random()*xe.length)],x:Math.cos(a)*l,y:Math.sin(a)*l,rotation:U(0,720),size:n,shape:d}})}function ue({onComplete:t}){const[s,a]=o.useState(!0),l=o.useMemo(()=>Qe(),[]);return o.useEffect(()=>{const n=setTimeout(()=>{a(!1),t==null||t()},te*1e3);return()=>clearTimeout(n)},[t]),e.jsx(X,{children:s&&e.jsx("div",{className:"fixed inset-0 z-[100] pointer-events-none overflow-hidden",children:l.map(n=>e.jsx(v.div,{className:"absolute",style:{left:"50%",top:"40%",width:n.shape==="circle"?n.size:n.size*.7,height:n.size,backgroundColor:n.color,borderRadius:n.shape==="circle"?"50%":"2px"},initial:{x:0,y:0,opacity:1,rotate:0,scale:1},animate:{x:n.x,y:[0,n.y*.4,n.y+300],opacity:[1,1,0],rotate:n.rotation,scale:[1,1.2,.5]},transition:{duration:te,ease:[.25,.46,.45,.94],y:{duration:te,ease:[.22,.61,.36,1]}}},n.id))})})}const K=[{value:1,color:"#ef4444"},{value:5,color:"#f59e0b"},{value:2,color:"#10b981"},{value:10,color:"#a855f7"},{value:3,color:"#3b82f6"},{value:15,color:"#f97316"},{value:1,color:"#ec4899"},{value:25,color:"#f59e0b"},{value:2,color:"#06b6d4"},{value:5,color:"#10b981"},{value:3,color:"#a855f7"},{value:10,color:"#ef4444"}],q=360/K.length;function se(t,s,a,l){const n=(l-90)*Math.PI/180;return{x:t+a*Math.cos(n),y:s+a*Math.sin(n)}}function He(t,s,a,l,n){const d=se(t,s,a,n),u=se(t,s,a,l),N=n-l<=180?"0":"1";return["M",t,s,"L",d.x,d.y,"A",a,a,0,N,0,u.x,u.y,"Z"].join(" ")}function We({availability:t,onSpinComplete:s}){const[a,l]=o.useState(!1),[n,d]=o.useState(0),[u,N]=o.useState(null),[$,_]=o.useState(!1),[G,i]=o.useState(null),L=o.useRef(!1),I=(t==null?void 0:t.can_spin)??!0,T=(t==null?void 0:t.reason)??null,p=!I,R=o.useCallback(async()=>{if(!(a||p)){l(!0),N(null),i(null);try{const h=await O("/api/spin/spin",{method:"POST"}),b=h.points_won??h.points??h.result??5,j=K.reduce((C,H,g)=>(H.value===b&&C.push(g),C),[]),E=(j.length>0?j[Math.floor(Math.random()*j.length)]:Math.floor(Math.random()*K.length))*q+q/2,f=5+Math.floor(Math.random()*3),B=n+f*360+(360-E);d(B),setTimeout(()=>{N(b),_(!0),l(!1),L.current=!0,s==null||s(b)},3500)}catch(h){i(h.message||"Spin failed!"),l(!1)}}},[a,p,n,s]),M=150,w=150,F=140;return e.jsxs("div",{className:"flex flex-col items-center gap-5",children:[$&&e.jsx(ue,{onComplete:()=>_(!1)}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1 z-10",children:e.jsx("div",{className:"w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[20px] border-t-sky",style:{filter:"drop-shadow(0 2px 6px rgba(59,130,246,0.4))"}})}),e.jsx(v.div,{animate:{rotate:n},transition:{duration:3.5,ease:[.2,.8,.3,1]},className:"w-[260px] h-[260px] sm:w-[300px] sm:h-[300px]",children:e.jsxs("svg",{viewBox:"0 0 300 300",className:"w-full h-full drop-shadow-xl",children:[e.jsx("circle",{cx:M,cy:w,r:F+4,fill:"none",stroke:"#1e293b",strokeWidth:"4"}),K.map((h,b)=>{const j=b*q,S=j+q,E=j+q/2,f=se(M,w,F*.65,E);return e.jsxs("g",{children:[e.jsx("path",{d:He(M,w,F,j,S),fill:h.color,stroke:"#0a0e1a",strokeWidth:"2",opacity:p&&!a?.4:.9}),e.jsx("text",{x:f.x,y:f.y,textAnchor:"middle",dominantBaseline:"central",fill:"white",fontFamily:"Inter, system-ui, sans-serif",fontSize:"12",fontWeight:"800",transform:`rotate(${E}, ${f.x}, ${f.y})`,children:h.value})]},b)}),e.jsx("circle",{cx:M,cy:w,r:22,fill:"#111827",stroke:"#1e293b",strokeWidth:"3"}),e.jsx("circle",{cx:M,cy:w,r:10,fill:"#3b82f6"})]})})]}),u!==null&&e.jsxs("div",{className:"game-panel px-6 py-3 text-center",children:[e.jsx("p",{className:"text-muted text-xs",children:"You won"}),e.jsxs("p",{className:"text-gold text-lg font-bold mt-1",children:[u," XP"]})]}),p&&!a&&T&&e.jsx("p",{className:"text-gold text-sm text-center max-w-xs",children:T}),G&&e.jsx("p",{className:"text-crimson text-sm text-center",children:G}),e.jsx("button",{onClick:R,disabled:a||p,className:`game-btn game-btn-blue text-base px-10 py-3 ${a||p?"opacity-50 cursor-not-allowed":""}`,children:a?"SPINNING...":p?"LOCKED":"SPIN!"})]})}const Y=[{id:"default",label:"Classic",icon:"âš”ï¸",description:"The standard quest board",headerGradient:null,pageGradient:null,cardAccent:null,particleEmojis:null},{id:"halloween",label:"Haunted Dungeon",icon:"ðŸŽƒ",description:"Spooky vibes for brave heroes",headerGradient:"linear-gradient(135deg, rgba(88,28,135,0.25) 0%, rgba(30,10,60,0.35) 50%, rgba(139,69,19,0.15) 100%)",pageGradient:"radial-gradient(ellipse at top, rgba(88,28,135,0.12) 0%, transparent 70%)",cardAccent:"#9333ea",particleEmojis:["ðŸŽƒ","ðŸ•¸ï¸","ðŸ‘»","ðŸ¦¿","ðŸ”®"]},{id:"christmas",label:"Winter Workshop",icon:"ðŸŽ„",description:"Santa's quest factory",headerGradient:"linear-gradient(135deg, rgba(22,101,52,0.25) 0%, rgba(153,27,27,0.20) 50%, rgba(22,78,99,0.15) 100%)",pageGradient:"radial-gradient(ellipse at top, rgba(22,101,52,0.10) 0%, transparent 70%)",cardAccent:"#ef4444",particleEmojis:["â„ï¸","ðŸŽ„","ðŸŽ","â­","ðŸ””"]},{id:"space",label:"Space Station",icon:"ðŸš€",description:"Missions from orbit",headerGradient:"linear-gradient(135deg, rgba(30,58,138,0.30) 0%, rgba(88,28,135,0.20) 50%, rgba(15,23,42,0.35) 100%)",pageGradient:"radial-gradient(ellipse at top, rgba(30,58,138,0.12) 0%, transparent 70%)",cardAccent:"#3b82f6",particleEmojis:["ðŸš€","ðŸŒŸ","ðŸª","ðŸ›¸","â­"]},{id:"underwater",label:"Ocean Kingdom",icon:"ðŸŒŠ",description:"Deep sea adventures",headerGradient:"linear-gradient(135deg, rgba(8,145,178,0.25) 0%, rgba(6,78,59,0.20) 50%, rgba(21,94,117,0.25) 100%)",pageGradient:"radial-gradient(ellipse at top, rgba(8,145,178,0.12) 0%, transparent 70%)",cardAccent:"#06b6d4",particleEmojis:["ðŸ ","ðŸŒŠ","ðŸ™","ðŸš","ðŸ§œ"]},{id:"enchanted",label:"Enchanted Garden",icon:"ðŸŒ¸",description:"Magical forest quests",headerGradient:"linear-gradient(135deg, rgba(219,39,119,0.20) 0%, rgba(126,34,206,0.20) 50%, rgba(5,150,105,0.15) 100%)",pageGradient:"radial-gradient(ellipse at top, rgba(219,39,119,0.10) 0%, transparent 70%)",cardAccent:"#ec4899",particleEmojis:["ðŸŒ¸","ðŸ¦‹","ðŸŒ¿","âœ¨","ðŸŒº"]}];function Q(t){return Y.find(s=>s.id===t)||Y[0]}function Ve({themeId:t}){const s=Q(t);return s.pageGradient?e.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",style:{background:s.pageGradient}}):null}function Ue({themeId:t}){const s=Q(t);return s.headerGradient?e.jsx("div",{className:"absolute inset-0 rounded-xl pointer-events-none z-0",style:{background:s.headerGradient}}):null}function Xe({themeId:t}){const s=Q(t);return s.particleEmojis?e.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-xl pointer-events-none z-0",children:s.particleEmojis.map((a,l)=>e.jsx("span",{className:"quest-particle absolute select-none",style:{left:`${12+l*18}%`,top:`${10+l%3*25}%`,fontSize:`${12+l%3*4}px`,animationDelay:`${l*1.2}s`,opacity:.15},children:a},l))}):null}function Ke({themeId:t}){var a;const s=Q(t);return t==="default"?null:e.jsxs("div",{className:"flex items-center gap-1.5 text-xs",children:[e.jsx("span",{children:(a=s.particleEmojis)==null?void 0:a[0]}),e.jsx("span",{className:"font-semibold",style:{color:s.cardAccent,opacity:.8},children:s.label}),e.jsx("span",{children:s.icon})]})}function Ye({themeId:t,children:s}){const a={default:"Quest Board",halloween:"Dungeon Quests",christmas:"Workshop Tasks",space:"Mission Control",underwater:"Ocean Missions",enchanted:"Garden Quests"};return e.jsx(e.Fragment,{children:a[t]||s||"Quest Board"})}function Ze(){const t=new Date,s=t.getDay(),a=s===0?-6:1-s,l=new Date(t);return l.setDate(t.getDate()+a),l.toISOString().slice(0,10)}function Je(){return new Date().toISOString().slice(0,10)}function et(t){switch(t){case"easy":return{text:"Easy",color:"text-emerald bg-emerald/10 border-emerald/20"};case"medium":return{text:"Medium",color:"text-gold bg-gold/10 border-gold/20"};case"hard":return{text:"Hard",color:"text-orange-400 bg-orange-400/10 border-orange-400/20"};case"expert":return{text:"Expert",color:"text-crimson bg-crimson/10 border-crimson/20"};default:return{text:"Easy",color:"text-emerald bg-emerald/10 border-emerald/20"}}}const tt={hidden:{opacity:0,y:12},visible:t=>({opacity:1,y:0,transition:{delay:t*.05,type:"spring",stiffness:300,damping:28}})};function ht(){var re,ie,oe;const{user:t,updateUser:s}=Ne(),{spin_wheel_enabled:a}=we(),{colorTheme:l}=Se(),n=ke(),[d,u]=o.useState([]),[N,$]=o.useState([]),[_,G]=o.useState(null),[i,L]=o.useState(null),[I,T]=o.useState(!0),[p,R]=o.useState(null),[M,w]=o.useState(!1),[F,h]=o.useState(!1),[b,j]=o.useState(null),[S,E]=o.useState(null),[f,B]=o.useState(""),[C,H]=o.useState(3),[g,he]=o.useState(()=>localStorage.getItem("chorequest-board-theme")||"default"),fe=r=>{he(r),localStorage.setItem("chorequest-board-theme",r),h(!1)},D=o.useCallback(async()=>{try{R(null);const r=Ze(),c=Je(),k=[O("/api/chores"),O(`/api/calendar?week_start=${r}`)];a&&k.push(O("/api/spin/availability")),k.push(O("/api/stats/me"));const m=await Promise.all(k),z=m[0],P=m[1],A=a?m[2]:null,y=m[a?3:2];y&&(L(y),y.interactions_remaining!=null&&H(y.interactions_remaining)),$(z);const x=(P.days&&P.days[c]||[]).filter(ee=>ee.user_id===(t==null?void 0:t.id));u(x),G(A)}catch(r){R(r.message||"Failed to load quest data")}finally{T(!1)}},[t==null?void 0:t.id,a]);o.useEffect(()=>{D()},[D]),o.useEffect(()=>{const r=()=>{D()};return window.addEventListener("ws:message",r),()=>window.removeEventListener("ws:message",r)},[D]);const ge=async r=>{j(r),E(r),B("");try{const c=await O("/api/pets/interact",{method:"POST",body:{action:r}});H(c.interactions_remaining),B(`${{feed:"Fed",pet:"Petted",play:"Played with"}[r]} your pet! +${c.xp_awarded} XP${c.levelup?" - LEVEL UP!":""}`),c.levelup&&w(!0),c.new_balance!=null&&s({points_balance:c.new_balance}),await D()}catch(c){B(c.message||"Could not interact with pet")}finally{j(null),setTimeout(()=>{E(null),B("")},4e3)}},be=!!(i!=null&&i.pet),Z=((re=i==null?void 0:i.pet)==null?void 0:re.type)||((ie=t==null?void 0:t.avatar_config)==null?void 0:ie.pet)||"none",ae=Pe((t==null?void 0:t.avatar_config)||{});if(I)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(le,{className:"animate-spin text-sky",size:28})});const ne=d.filter(r=>r.status==="verified"||r.status==="completed").length,W=d.length,je=W>0?Math.round(ne/W*100):0,V=Q(g);return e.jsxs("div",{className:`max-w-2xl mx-auto space-y-5 quest-board-${g}`,children:[e.jsx(Ve,{themeId:g}),e.jsx(X,{children:M&&e.jsx(ue,{onComplete:()=>w(!1)})}),e.jsxs("div",{className:"game-panel p-5 relative overflow-hidden",children:[e.jsx(Ue,{themeId:g}),e.jsx(Xe,{themeId:g}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"font-heading text-cream text-xl font-extrabold",children:e.jsx(Ye,{themeId:g,children:"Quest Board"})}),e.jsx("button",{onClick:()=>h(r=>!r),className:"flex items-center justify-center w-8 h-8 rounded-lg border border-border hover:border-accent hover:bg-accent/10 text-cream transition-all text-base",title:"Change board theme",children:((oe=Y.find(r=>r.id===g))==null?void 0:oe.icon)||"âš”ï¸"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(De,{value:(t==null?void 0:t.points_balance)??0}),e.jsx(Fe,{streak:(t==null?void 0:t.current_streak)??0})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-3",children:[e.jsx(Ke,{themeId:g}),(i==null?void 0:i.rank)&&e.jsx(Ce,{rank:i.rank,size:"sm"}),(i==null?void 0:i.pet)&&e.jsx(de,{pet:i.pet,compact:!0})]}),W>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"text-muted text-xs font-medium",children:"Today's Progress"}),e.jsxs("span",{className:"text-cream text-xs font-bold",children:[ne,"/",W]})]}),e.jsx("div",{className:"xp-bar",children:e.jsx(v.div,{className:"xp-bar-fill",initial:{width:0},animate:{width:`${je}%`},transition:{duration:.8,ease:[.22,1,.36,1]}})})]})]})]}),F&&e.jsxs("div",{className:"game-panel p-4",children:[e.jsx("h3",{className:"text-cream text-xs font-bold mb-3",children:"Choose Board Theme"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Y.map(r=>e.jsxs("button",{onClick:()=>fe(r.id),className:`flex items-center gap-2 p-3 rounded-lg border transition-all text-left ${g===r.id?"border-accent bg-accent/10":"border-border/50 bg-surface-raised/30 hover:border-border-light"}`,children:[e.jsx("span",{className:"text-xl",children:r.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-cream text-xs font-medium",children:r.label}),e.jsx("p",{className:"text-muted text-[10px]",children:r.description})]})]},r.id))})]}),p&&e.jsxs("div",{className:"game-panel p-3 flex items-center gap-2 border-crimson/30 text-crimson text-sm",children:[e.jsx(ze,{size:16}),e.jsx("span",{children:p})]}),(()=>{const r=d.filter(c=>c.status==="pending"||c.status==="assigned");return r.length===0&&!I?e.jsxs(v.div,{className:"game-panel p-10 flex flex-col items-center gap-3 text-center",initial:{opacity:0,y:12},animate:{opacity:1,y:0},children:[e.jsx($e,{size:36,className:"text-muted"}),e.jsx("p",{className:"text-muted text-sm",children:d.length===0?"No quests for today. Take a break!":"All quests complete! Time to spin the wheel!"})]}):e.jsx("div",{className:"space-y-3",children:r.map((c,k)=>{var A,y;const m=c.chore;if(!m)return null;const z=et(m.difficulty),P=((A=m.category)==null?void 0:A.colour)||"#3b82f6";return e.jsx(v.div,{className:"game-panel p-4 transition-all cursor-pointer hover:border-sky/40",style:V.cardAccent?{borderColor:`${V.cardAccent}25`,boxShadow:`0 0 12px ${V.cardAccent}10, inset 0 1px 0 ${V.cardAccent}08`}:void 0,variants:tt,initial:"hidden",animate:"visible",custom:k,onClick:()=>n("/chores"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 w-1 h-12 rounded-full flex-shrink-0",style:{backgroundColor:P}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1.5",children:[e.jsx("h3",{className:"text-cream text-sm font-semibold truncate",children:Ee(m.title,l)}),e.jsx(Re,{size:16,className:"text-muted flex-shrink-0"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 text-gold text-xs font-semibold",children:[e.jsx(pe,{size:12,fill:"currentColor"}),m.points," XP"]}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold border ${z.color}`,children:z.text}),((y=m.category)==null?void 0:y.name)&&e.jsx("span",{className:"text-muted text-xs",children:m.category.name}),m.requires_photo&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-muted text-xs",children:[e.jsx(Be,{size:10}),"Photo"]})]})]})]})},c.id)})})})(),be&&(()=>{var y,J;const r=(t==null?void 0:t.avatar_config)||{},c=((y=i==null?void 0:i.pet)==null?void 0:y.level)||1;(J=i==null?void 0:i.pet)!=null&&J.name;const k=r.pet_accessory,m=1+(c-1)*.04,z=c>=7?"#f59e0b":c>=5?"#a855f7":null,P=26,A=20;return e.jsxs("div",{className:"game-panel p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-cream text-sm font-bold flex items-center gap-2",children:[e.jsx(me,{size:14,className:"text-crimson"}),"Pet Care"]}),e.jsxs("span",{className:"text-muted text-[11px]",children:[C," interaction",C!==1?"s":""," left today"]})]}),e.jsxs("div",{className:"flex flex-col items-center mb-3 gap-1",children:[e.jsxs("div",{className:`pet-interaction-stage ${S?`pet-action-${S}`:""}`,children:[e.jsx("div",{className:"avatar-idle rounded-full overflow-hidden",style:{width:96,height:96},children:e.jsxs("svg",{width:96,height:96,viewBox:"19 13 14 14",children:[e.jsx("circle",{cx:"26",cy:"20",r:"6.5",fill:"rgba(255,255,255,0.06)"}),z&&e.jsx("circle",{cx:P,cy:A,r:4,fill:z,opacity:"0.15"}),e.jsx("g",{className:"avatar-pet",children:e.jsxs("g",{transform:m!==1?`translate(${P},${A}) scale(${m}) translate(${-P},${-A})`:void 0,children:[Ae(Z,ae,"right"),Te(Z,c,ae,"right"),Me(Z,k,"right")]})})]})}),e.jsxs(X,{children:[S==="feed"&&e.jsx(v.span,{className:"absolute -top-1 right-0 text-lg pointer-events-none",initial:{opacity:0,y:8},animate:{opacity:1,y:-8},exit:{opacity:0},transition:{duration:.6},children:"ðŸ–"}),S==="pet"&&e.jsx(e.Fragment,{children:[0,1,2].map(x=>e.jsx(v.span,{className:"absolute pointer-events-none text-sm",style:{left:`${20+x*25}%`,top:"-4px"},initial:{opacity:0,y:4},animate:{opacity:[0,1,0],y:-16},transition:{duration:.8,delay:x*.2},children:"ðŸ’•"},x))}),S==="play"&&e.jsx(e.Fragment,{children:[0,1].map(x=>e.jsx(v.span,{className:"absolute pointer-events-none text-sm",style:{left:`${15+x*50}%`,top:"-4px"},initial:{opacity:0,scale:.5},animate:{opacity:[0,1,0],scale:1.2,y:-12},transition:{duration:.6,delay:x*.3},children:"â­"},x))})]})]}),e.jsx(de,{pet:i==null?void 0:i.pet})]}),e.jsx(X,{children:f&&e.jsx(v.p,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0},className:`text-xs mb-3 text-center font-semibold ${f.includes("Could not")||f.includes("tired")?"text-crimson":"text-emerald"}`,children:f})}),e.jsx("div",{className:"flex gap-2",children:[{action:"feed",icon:me,label:"Feed",color:"game-btn-red"},{action:"pet",icon:_e,label:"Pet",color:"game-btn-blue"},{action:"play",icon:Ge,label:"Play",color:"game-btn-purple"}].map(({action:x,icon:ee,label:ye,color:ve})=>e.jsxs("button",{onClick:()=>ge(x),disabled:!!b||C<=0,className:`game-btn ${ve} flex-1 flex items-center justify-center gap-1.5 !py-2 text-xs ${b===x?"opacity-60 cursor-wait":""} ${C<=0?"opacity-40 cursor-not-allowed":""}`,children:[b===x?e.jsx(le,{size:14,className:"animate-spin"}):e.jsx(ee,{size:14}),ye]},x))})]})})(),(i==null?void 0:i.streak_freeze_available)&&e.jsxs("div",{className:"game-panel p-3 flex items-center gap-3",children:[e.jsx(Ie,{size:16,className:"text-sky flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-cream text-xs font-medium",children:"Streak Freeze Available"}),e.jsx("p",{className:"text-muted text-[10px]",children:"Your streak will be saved once if you miss a day this month"})]})]}),a&&e.jsx("div",{className:"pt-2",children:e.jsx(We,{availability:_,onSpinComplete:()=>{D()}})})]})}export{ht as default};
